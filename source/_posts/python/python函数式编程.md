---
title: python函数式编程
categories: [技术]
tags: [python]
date: 2023-11-28 16:29:28
---

我们通过把大段的代码拆分成函数，通过一层层的函数调用，来把复杂的任务分解成简单的任务，这种分解可以称为面向过程的程序设计。

函数式编程就是一种抽象程度很高的编程范式，纯粹的函数式编程语言编写的函数没有变量，因此，任意一个函数，只要输入是确定的，输出就是确定的，这种纯函数我们称之为没有副作用。

<!-- more -->

# 高阶函数

变量名可以指向函数，函数名其实就是指向函数的一个变量。

既然变量可以指向函数，函数的参数能接收变量，那么一个函数就可以接收另一个函数作为参数，这种函数就称之为高阶函数。

## map/reduce

> MapReduce 的原理在于将大规模的数据处理任务划分为多个并行的 Map 和 Reduce 操作，充分利用了集群中的计算资源，实现了高效的分布式计算。通过将数据处理过程分解为 Map 和 Reduce 两个阶段，并在其中引入数据的分组和排序操作，MapReduce 能够有效地处理大规模数据集，并具备容错性和可扩展性。

`map()`函数接收两个参数，一个是函数，一个是`Iterable`，map将传入的函数依次作用到序列的每个元素，并把结果作为新的Iterator返回。

比如将一个整数集合转换为字符串
```shell
>>>
>>> L=[1,2,3,4,5,6,7,8,9]
>>> r = map(str, L)
>>> list(r)
['1', '2', '3', '4', '5', '6', '7', '8', '9']
```

`map()` 作为高阶函数，把运算规则抽象化了。

`reduce` 把一个函数作用在一个序列`[x1, x2, x3, ...]`上, 这个函数必须接收两个参数，`reduce`把**结果**继续和序列的下一个元素做累积计算，其效果就是

> reduce(f, [x1, x2, x3, x4]) = f(f(f(x1, x2), x3), x4)

## filter

`filter()` 函数用于过滤序列。

`filter()`也接收一个函数和一个序列。`filter()`把传入的函数依次作用于每个元素，然后根据返回值是True还是False决定保留还是丢弃该元素。

filter的关键在于正确实现一个筛选函数。

## sorted

内置的`sorted()`函数可以对list进行排序。默认按照升序排列。

`sorted()`函数也是一个高阶函数，它还可以接收一个key函数来实现自定义的排序, key指定的函数将作用于list的每一个元素上，并根据key函数返回的结果进行排序。

`sorted()`对字符串排序，是按照ASCII的大小比较的, 可以使用`ord()`函数将字母转为数字来查看大小。由于`'Z' < 'a'`，结果，大写字母Z会排在小写字母a的前面。

反向排序，可以传入第三个参数 `reverse=True`

```shell
>>> sorted(['bob', 'about', 'Zoo', 'Credit'], key=str.lower, reverse=True)
['Zoo', 'Credit', 'bob', 'about']
```

